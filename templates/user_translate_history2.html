<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Translate Tool</title>
    <link rel="stylesheet" href="/static/plugins/bootstrap-3.4.1/bootstrap-3.4.1-dist/css/bootstrap.css">
    <link rel="stylesheet" href="/static/plugins/font-awesome-4.7.0/font-awesome-4.7.0/css/font-awesome.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.8/clipboard.min.js"></script>
    <style>
        .navbar {
            border-radius: 0;
        }

        .navbar-brand img {
            position: relative;
            bottom: 9px;
            background: #808080;
        }

        .navbar-brand {
            line-height: 32px; /* ä¸å›¾æ ‡é«˜åº¦ä¸€è‡´ï¼Œæ ¹æ®éœ€è¦è¿›è¡Œè°ƒæ•´ */
        }

        .navbar-nav > li > a {
            line-height: 32px; /* ä¸å›¾æ ‡é«˜åº¦ä¸€è‡´ï¼Œæ ¹æ®éœ€è¦è¿›è¡Œè°ƒæ•´ */
        }

        div ul {
            list-style: none;
            display: flex;
            justify-content: space-between;
            padding: 0;
        }

        div li {
            margin-right: 20px;
            font-weight: bold;
        }

        body {
            background: #EDEDE8;
        }


        .container {
            max-width: 80%;
            margin: 0 auto;
            background-color: #fff;
        }

        select, input {
            padding: 5px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        button {
            background-color: #007bff;
            color: #fff;
            padding: 10px 20px;
            border: none;
            cursor: pointer;
            border-radius: 5px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        table, th, td {
            border: 1px solid #ccc;
        }

        th, td {
            padding: 8px;
            text-align: center;
        }

        th {
            background-color: #007bff;
            color: #fff;
        }

        .favorite-button {
            background-color: transparent;
            border: none;
            color: #ff0000;
            cursor: pointer;
        }

        #pagination {
            text-align: center;
            margin-top: 20px;
        }

        ul {
            list-style: none;
            display: flex;
            justify-content: space-between;
            padding: 0;
        }

        li {
            margin-right: 20px;
            font-weight: bold;
        }

    </style>
</head>

<body>
<nav class="navbar navbar-default">
    <div class="container">
        <div class="navbar-header">
            <a class="navbar-brand" href="/top/1"> <img width="160px" src="/static/img/logola.png"></a>

            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
                    data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav">
                <li><a href="/user_translation_page/1">ç¿»è¨³ç”»é¢</a></li>
                <li><a href="/show_translation_list">å±¥æ­´ç”»é¢</a></li>
                <ul class="nav navbar-nav navbar-right">
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button"
                           aria-haspopup="true" aria-expanded="false">è¨€èªé¸æŠ<span class="caret"></span></a>
                        <ul class="dropdown-menu">
                            <li><a href="/user_translation_page/1">æ—¥æœ¬èª</a></li>
                            <li><a href="/user_translation_page/2">English</a></li>
                            <li><a href="/user_translation_page/3">ä¸­æ–‡</a></li>
                            <li><a href="/user_translation_page/4">á€™á€¼á€”á€ºá€™á€¬á€˜á€¬á€á€¬</a></li>
                        </ul>
                    </li>
                </ul>

                <li><a href="#">Link</a></li>

                <ul class="nav navbar-nav navbar-right">
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button"
                           aria-haspopup="true" aria-expanded="false">ä»–ã®APP<span class="caret"></span></a>
                        <ul class="dropdown-menu">
                            <li><a href="/user_translation_page/1">ãƒãƒ£ãƒƒãƒˆãƒœãƒƒãƒˆ</a></li>
                            <li><a href="/user_translation_page/2">ãƒ‡ãƒ¼ã‚¿ãƒ¼åˆ†æ</a></li>
                            <li><a href="/user_translation_page/3">å·¡å›ãƒœãƒ¼ãƒ‰</a></li>
                            <li><a href="/user_translation_page/4">ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ </a></li>
                        </ul>
                    </li>
                </ul>
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true"
                       aria-expanded="false"> <img width="32px" src="/static/img/user1.jpg"><span
                            class="caret"></span></a>
                    <ul class="dropdown-menu">
                        <li><a href="/user_info/1">å€‹äººæƒ…å ±</a></li>
                        <li><a href="#">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å¤‰æ›´</a></li>
                        <li role="separator" class="divider"></li>
                        <li><a href="/logout/1">LogOut</a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</nav>


<button type="button" class="btn btn-default" aria-label="Left Align">
    <span class="glyphicon glyphicon-align-right" aria-hidden="true"></span>
</button>

<button type="button" class="btn btn-default btn-lg" aria-label="Left Align">
    <span class="glyphicon glyphicon-superscript" aria-hidden="true"> </span> Star
</button>


<div class="container">

    <div>
        <ul>
            <li>
                <div class="dropdown">
                    <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1"
                            data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                        è¾“å…¥è¯­è¨€
                        <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
                        <li><a href="#">è‹±è¯­</a></li>
                        <li><a href="#">æ—¥è¯­</a></li>
                        <li><a href="#">ä¸­æ–‡</a></li>
                        <li><a href="#">ç¼…ç”¸è¯­</a></li>
                    </ul>
                </div>
            </li>
            <li>è¾“å…¥è¯­è¨€: <select id="inputLanguageSelector"></select></li>
            <li>è¾“å‡ºè¯­è¨€: <select id="outputLanguageSelector"></select></li>
            <li>å¼€å§‹æ—¶é—´: <input type="date" id="startDate"></li>
            <li>ç»“æŸæ—¶é—´: <input type="date" id="endDate"></li>
        </ul>
        <ul>
            <li>
                <button id="ascendingOrderButton">å‡åº</button>
                <button id="descendingOrderButton">é™åº</button>
            </li>
            <li>
                <button id="showFavoritesButton">æ˜¾ç¤ºæ”¶è—</button>
            </li>
            <li>å…³é”®å­—æŸ¥è¯¢: <input type="text" id="searchInput"></li>
            <li>
                <button id="resetButton">é‡æ–°è®¾å®š</button>
            </li>
        </ul>
    </div>
    <table>
        <thead>
        <tr>
            <th>ID</th>
            <th>è¾“å…¥è¯­è¨€</th>
            <th>è¾“å…¥å†…å®¹</th>
            <th>è¾“å‡ºè¯­è¨€</th>
            <th>è¾“å‡ºå†…å®¹</th>
            <th>æ”¶è—</th>
            <th>åˆ é™¤</th>
        </tr>
        </thead>
        <tbody id="tableBody">
        <!-- æ•°æ®å°†ä»¥è¡¨æ ¼è¡Œçš„å½¢å¼æ˜¾ç¤ºåœ¨è¿™é‡Œ -->
        </tbody>
    </table>
    <div id="pagination">
        <button id="prevPage">ä¸Šä¸€é¡µ</button>
        <button id="nextPage">ä¸‹ä¸€é¡µ</button>
        <input type="number" id="pageInput" placeholder="è·³è½¬åˆ°é¡µ">
        <button id="goToPage">è·³è½¬</button>
    </div>

</div>
<div class="container">
    <div style="margin-bottom: 10px">
        <a class="btn btn-success" href="/depart/add/">
            <span class="glyphicon glyphicon-plus-sign" aria-hidden="true"></span>{{ title }}</a>
    </div>
    <div class="bs-example" data-example-id="bordered-table">
        <div class="panel panel-default">
            <!-- Default panel contents -->
            <div class="panel-heading"><span class="glyphicon glyphicon-th" aria-hidden="true"></span> Translate
                List
            </div>
            <table class="table table-bordered">
                <thead>
                <tr class="active">
                    <th>ID</th>
                    <th>è¾“å…¥è¯­è¨€</th>
                    <th>çŸ¥ã‚ŠãŸã„å˜èª</th>
                    <th>è¾“å‡ºè¯­è¨€</th>
                    <th>ç¿»è¨³ã—ãŸå˜èª</th>
                    <th>æ”¶è—</th>
                    <th>æ“ä½œ</th>
                </tr>
                </thead>
                <tbody>
                {% for item in data_list %}
                    <tr class="{% if loop.index is even %}success{% else %}active{% endif %}">
                        <td>{{ item.id }}</td>
                        <td>{{ item.inputlanguage }}</td>
                        <td>{{ item.inputtext }}</td>
                        <td>{{ item.outputlanguage }}</td>
                        <td>{{ item.outputtext }}</td>
                        <td>
                            <div class="btn-container">
                                <form method="POST" action="/update_translation_item"> <!-- æ›¿æ¢æˆå¤„ç†æ›´æ–°çš„è·¯ç”± -->
                                    <input type="hidden" name="nid" value="{{ item.id }}">
                                    <button type="submit" class="btn btn-primary btn-xs">æ›´æ–°</button>
                                </form>
                                <form method="POST" action="/delete_translation_list">
                                    <input type="hidden" name="nid" value="{{ item.id }}">
                                    <button type="submit" class="btn btn-danger btn-xs">åˆ é™¤</button>
                                </form>
                            </div>

                        </td>
                    </tr>
                {% endfor %}

                </tbody>
            </table>
        </div>

    </div>
</div>
<script>
    // æ¨¡æ‹Ÿæ•°æ®ï¼Œæ‚¨åº”è¯¥ä»åç«¯è·å–å®é™…æ•°æ®
    const data = [
        {
            id: 1,
            inputLanguage: 'English',
            inputContent: 'Hello',
            outputLanguage: 'Spanish',
            outputContent: 'Hola',
            favorite: false
        },
        {
            id: 2,
            inputLanguage: 'French',
            inputContent: 'Bonjour',
            outputLanguage: 'German',
            outputContent: 'Guten Tag',
            favorite: true
        },
        // æ·»åŠ æ›´å¤šæ•°æ®
    ];

    // è·å–DOMå…ƒç´ 
    const inputLanguageSelector = document.getElementById('inputLanguageSelector');
    const outputLanguageSelector = document.getElementById('outputLanguageSelector');
    const startDateInput = document.getElementById('startDate');
    const endDateInput = document.getElementById('endDate');
    const ascendingOrderButton = document.getElementById('ascendingOrderButton');
    const descendingOrderButton = document.getElementById('descendingOrderButton');
    const showFavoritesButton = document.getElementById('showFavoritesButton');
    const searchInput = document.getElementById('searchInput');
    const resetButton = document.getElementById('resetButton');
    const tableBody = document.getElementById('tableBody');
    const prevPage = document.getElementById('prevPage');
    const nextPage = document.getElementById('nextPage');
    const pageInput = document.getElementById('pageInput');
    const goToPage = document.getElementById('goToPage');
    let currentPage = 1;
    const itemsPerPage = 10;

    // åˆå§‹åŒ–é¡µé¢
    function initPage() {
        currentPage = 1;
        renderData();
    }

    // æ¸²æŸ“æ•°æ®
    function renderData() {
        tableBody.innerHTML = '';

        // è¿‡æ»¤ã€æ’åºæ•°æ®
        const filteredData = filterAndSortData(data);

        // åˆ†é¡µæ•°æ®
        const start = (currentPage - 1) * itemsPerPage;
        const end = start + itemsPerPage;
        const paginatedData = filteredData.slice(start, end);

        paginatedData.forEach(item => {
            const row = document.createElement('tr');
            row.innerHTML = `
                    <td>${item.id}</td>
                    <td>${item.inputLanguage}</td>
                    <td>${item.inputContent}</td>
                    <td>${item.outputLanguage}</td>
                    <td>${item.outputContent}</td>
                    <td><button class="favorite-button" data-id="${item.id}">${item.favorite ? 'â¤ï¸' : 'ğŸ¤'}</button></td>
                    <td><button class="delete-button" data-id="${item.id}">åˆ é™¤</button></td>
                `;
            tableBody.appendChild(row);
        });

        // æ·»åŠ ç‚¹å‡»äº‹ä»¶å¤„ç†ç¨‹åº
        addEventListenersToButtons();
    }

    // è¿‡æ»¤å’Œæ’åºæ•°æ®
    function filterAndSortData(data) {
        const inputLanguage = inputLanguageSelector.value;
        const outputLanguage = outputLanguageSelector.value;
        const startDate = startDateInput.value;
        const endDate = endDateInput.value;
        const isAscending = ascendingOrderButton.classList.contains('active');
        const isDescending = descendingOrderButton.classList.contains('active');
        const showFavorites = showFavoritesButton.classList.contains('active');
        const keyword = searchInput.value.toLowerCase();

        return data.filter(item => {
            return (!inputLanguage || item.inputLanguage === inputLanguage) &&
                (!outputLanguage || item.outputLanguage === outputLanguage) &&
                (!startDate || item.startDate >= startDate) &&
                (!endDate || item.endDate <= endDate) &&
                (!showFavorites || item.favorite) &&
                (!keyword || item.inputContent.toLowerCase().includes(keyword) || item.outputContent.toLowerCase().includes(keyword));
        }).sort((a, b) => {
            if (isAscending) {
                return a.id - b.id;
            } else if (isDescending) {
                return b.id - a.id;
            } else {
                return 0;
            }
        });
    }

    // æ·»åŠ ç‚¹å‡»äº‹ä»¶å¤„ç†ç¨‹åº
    function addEventListenersToButtons() {
        const favoriteButtons = document.querySelectorAll('.favorite-button');
        favoriteButtons.forEach(button => {
            button.addEventListener('click', toggleFavorite);
        });

        const deleteButtons = document.querySelectorAll('.delete-button');
        deleteButtons.forEach(button => {
            button.addEventListener('click', deleteItem);
        });
    }

    // åˆ‡æ¢æ”¶è—çŠ¶æ€
    function toggleFavorite(event) {
        const id = parseInt(event.target.getAttribute('data-id'));
        const item = data.find(d => d.id === id);

        if (item) {
            item.favorite = !item.favorite;
            renderData();
        }
    }

    // åˆ é™¤é¡¹ç›®
    function deleteItem(event) {
        const id = parseInt(event.target.getAttribute('data-id'));
        const index = data.findIndex(d => d.id === id);

        if (index !== -1) {
            data.splice(index, 1);
            renderData();
        }
    }

    // æ·»åŠ æ’åºæŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶å¤„ç†ç¨‹åº
    ascendingOrderButton.addEventListener('click', () => {
        ascendingOrderButton.classList.add('active');
        descendingOrderButton.classList.remove('active');
        renderData();
    });

    descendingOrderButton.addEventListener('click', () => {
        descendingOrderButton.classList.add('active');
        ascendingOrderButton.classList.remove('active');
        renderData();
    });

    // æ·»åŠ æ˜¾ç¤ºæ”¶è—æŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶å¤„ç†ç¨‹åº
    showFavoritesButton.addEventListener('click', () => {
        if (showFavoritesButton.classList.contains('active')) {
            showFavoritesButton.classList.remove('active');
        } else {
            showFavoritesButton.classList.add('active');
        }
        renderData();
    });

    // é‡æ–°è®¾å®šæŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶å¤„ç†ç¨‹åº
    resetButton.addEventListener('click', () => {
        inputLanguageSelector.value = '';
        outputLanguageSelector.value = '';
        startDateInput.value = '';
        endDateInput.value = '';
        ascendingOrderButton.classList.remove('active');
        descendingOrderButton.classList.remove('active');
        showFavoritesButton.classList.remove('active');
        searchInput.value = '';
        currentPage = 1;
        renderData();
    });


    // åˆ†é¡µæ“ä½œ
    prevPage.addEventListener('click', () => {
        if (currentPage > 1) {
            currentPage--;
            renderData();
        }
    });

    nextPage.addEventListener('click', () => {
        if (currentPage < Math.ceil(data.length / itemsPerPage)) {
            currentPage++;
            renderData();
        }
    });

    goToPage.addEventListener('click', () => {
        const pageNumber = parseInt(pageInput.value);
        if (pageNumber >= 1 && pageNumber <= Math.ceil(data.length / itemsPerPage)) {
            currentPage = pageNumber;
            renderData();
        }
    });

    // åˆå§‹é¡µé¢åŠ è½½
    initPage();
</script>
<script src="/static/index.js"></script>
<script src="/static/plugins/jquery-3.6.0.min.js"></script>
<script src="/static/plugins/bootstrap-3.4.1/bootstrap-3.4.1-dist/js/bootstrap.js"></script>


</body>

</html>